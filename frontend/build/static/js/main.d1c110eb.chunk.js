(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t(1),r=t(15),u=t.n(r),o=t(6),i=t(3),s=function(e){return Object(c.jsxs)("div",{children:["filter shown with ",Object(c.jsx)("input",{value:e.filter,onChange:e.handleFilter})]})},l=function(e){return Object(c.jsx)("div",{children:Object(c.jsxs)("form",{onSubmit:e.addPerson,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:e.newName,onChange:e.nameChange})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:e.newNumber,onChange:e.numberChange})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{className:"button",type:"submit",children:"add"})})]})})},d=function(e){return Object(c.jsx)("div",{children:Object(c.jsxs)("p",{children:[e.person.name," ",e.person.number,Object(c.jsx)("button",{className:"button",onClick:e.handleClick,children:"delete"})]})})},j=t(4),b=t.n(j),f="/api/persons",h=function(){return b.a.get(f).then((function(e){return e.data}))},m=function(e){return b.a.post(f,e).then((function(e){return e.data}))},O=function(e,n){return b.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){return b.a.delete("".concat(f,"/").concat(e)).then((function(e){return e}))},p=function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"success",children:n})},x=function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"fail",children:n})},g=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],u=Object(a.useState)("Martin Fowler"),j=Object(i.a)(u,2),b=j[0],f=j[1],g=Object(a.useState)("040-1234567"),w=Object(i.a)(g,2),C=w[0],N=w[1],k=Object(a.useState)(""),S=Object(i.a)(k,2),y=S[0],T=S[1],D=Object(a.useState)(null),F=Object(i.a)(D,2),I=F[0],P=F[1],E=Object(a.useState)(null),J=Object(i.a)(E,2),A=J[0],B=J[1];Object(a.useEffect)((function(){h().then((function(e){return r(e)}))}),[]);var L=t.filter((function(e){return e.name.toLowerCase().includes(y)}));return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(p,{message:A}),Object(c.jsx)(x,{message:I}),Object(c.jsx)(s,{filter:y,handleFilter:function(e){T(e.target.value)}}),Object(c.jsx)("div",{children:Object(c.jsx)("h2",{children:"add a new"})}),Object(c.jsx)(l,{addPerson:function(e){e.preventDefault();var n={name:b,number:C};if(!0===t.some((function(e){return e.name===b})))if(window.confirm("".concat(b," is already added to the phonebook, replace the old number with a new one"))){var c=t.find((function(e){return e.name===b})),a=Object(o.a)(Object(o.a)({},c),{},{number:C});O(a.id,n).then((function(e){r(t.map((function(n){return n.name!==b?n:e}))),f(""),N(""),B("Updated ".concat(b)),setTimeout((function(){B(null)}),5e3)})).catch((function(e){P("Information of ".concat(b," has already been removed from the server")),setTimeout((function(){P(null)}),5e3)}))}else f(""),N("");else m(n).then((function(e){r(t.concat(e)),f(""),N(""),B("Added ".concat(b)),setTimeout((function(){B(null)}),5e3)})).catch((function(e){console.log(e.response.data),P(e.response.data.error)}))},newName:b,nameChange:function(e){f(e.target.value)},newNumber:C,numberChange:function(e){N(e.target.value)}}),Object(c.jsx)("h2",{children:"Numbers"}),L.map((function(e){return Object(c.jsx)(d,{person:e,handleClick:function(){return n=e,void(window.confirm("Delete ".concat(n.name,"?"))&&v(n.id).then((function(e){r(t.filter((function(e){return e.id!==n.id}))),B("Deleted ".concat(n.name))})).catch((function(e){P("Information of ".concat(n.name," has already been removed from the server")),setTimeout((function(){P(null)}),5e3)})));var n}},e.id)}))]})};t(38);u.a.render(Object(c.jsx)(g,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.d1c110eb.chunk.js.map